---
name: run
path: run
sidebar:
  order: 100
description: 'Run OpenTofu/Terraform commands.'
experiment:
  control: cli-redesign
  name: CLI Redesign
usage: |
  Run a command, passing arguments to an orchestrated tofu/terraform binary.

  This is the explicit, and most flexible form of running an IaC command with Terragrunt. Shortcuts can be found in "terragrunt --help" for common use-cases.
examples:
  - description: |
      Run the plan command.
    code: |
      terragrunt run plan
      # Shortcut:
      # terragrunt plan
  - description: |
      Run the plan command, and pass additional arguments.
    code: |
      terragrunt run -- output -json
      # Shortcut:
      # terragrunt output -json
flags:
  - name: all
    description: Run the specified OpenTofu/Terraform command on the stack of units in the current directory.
    type: bool
    env:
      - TG_ALL
  - name: auth-provider-cmd
    description: Run the provided command and arguments to authenticate Terragrunt dynamically when necessary.
    lookup: true
    type: string
    env:
      - TG_AUTH_PROVIDER_CMD
  - name: backend-require-bootstrap
    description: When this flag is set Terragrunt will fail if the remote state bucket needs to be created.
    type: bool
    env:
      - TG_BACKEND_REQUIRE_BOOTSTRAP
  - name: config
    description: The path to the Terragrunt config file. Default is terragrunt.hcl.
    type: string
    env:
      - TG_CONFIG
  - name: dependency-fetch-output-from-state
    description: The option fetches dependency output directly from the state file instead of using tofu/terraform output.
    type: bool
    env:
      - TG_DEPENDENCY_FETCH_OUTPUT_FROM_STATE
  - name: disable-bucket-update
    description: When this flag is set Terragrunt will not update the remote state bucket.
    type: bool
    env:
      - TG_DISABLE_BUCKET_UPDATE
  - name: disable-command-validation
    description: When this flag is set, Terragrunt will not validate the tofu/terraform command.
    type: bool
    env:
      - TG_DISABLE_COMMAND_VALIDATION
  - name: download-dir
    description: The path to download OpenTofu/Terraform modules into. Default is .terragrunt-cache in the working directory.
    type: string
    env:
      - TG_DOWNLOAD_DIR
  - name: engine-cache-path
    description: Cache path for Terragrunt engine files.
    type: string
    env:
      - TG_ENGINE_CACHE_PATH
  - name: engine-log-level
    description: Terragrunt engine log level.
    type: string
    env:
      - TG_ENGINE_LOG_LEVEL
  - name: engine-skip-check
    description: Skip checksum check for Terragrunt engine files.
    type: bool
    env:
      - TG_ENGINE_SKIP_CHECK
  - name: experimental-engine
    description: Enable Terragrunt experimental engine.
    type: bool
    env:
      - TG_EXPERIMENTAL_ENGINE
  - name: feature
    description: Set feature flags for the HCL code.
    type: string
    env:
      - TG_FEATURE
  - name: graph
    description: Run the specified OpenTofu/Terraform command following the Directed Acyclic Graph (DAG) of dependencies.
    type: bool
    env:
      - TG_GRAPH
  - name: iam-assume-role
    description: Assume the specified IAM role before executing OpenTofu/Terraform.
    type: string
    env:
      - TG_IAM_ASSUME_ROLE
  - name: iam-assume-role-duration
    description: Session duration for IAM Assume Role session.
    type: string
    env:
      - TG_IAM_ASSUME_ROLE_DURATION
  - name: iam-assume-role-session-name
    description: Name for the IAM Assumed Role session.
    type: string
    env:
      - TG_IAM_ASSUME_ROLE_SESSION_NAME
  - name: iam-assume-role-web-identity-token
    description: For AssumeRoleWithWebIdentity, the WebIdentity token.
    type: string
    env:
      - TG_IAM_ASSUME_ROLE_WEB_IDENTITY_TOKEN
  - name: inputs-debug
    description: Write debug.tfvars to working folder to help root-cause issues.
    type: bool
    env:
      - TG_INPUTS_DEBUG
  - name: no-auto-approve
    description: Don't automatically append '-auto-approve' to the underlying OpenTofu/Terraform commands run with 'run-all'.
    type: bool
    env:
      - TG_NO_AUTO_APPROVE
  - name: no-auto-init
    description: Don't automatically run 'terraform/tofu init' during other terragrunt commands. You must run 'terragrunt init' manually.
    type: bool
    env:
      - TG_NO_AUTO_INIT
  - name: no-auto-retry
    description: Don't automatically re-run command in case of transient errors.
    type: bool
    env:
      - TG_NO_AUTO_RETRY
  - name: no-destroy-dependencies-check
    description: When this flag is set, Terragrunt will not check for dependent units when destroying.
    type: bool
    env:
      - TG_NO_DESTROY_DEPENDENCIES_CHECK
  - name: parallelism
    description: Parallelism for --all commands.
    type: integer
    env:
      - TG_PARALLELISM
  - name: provider-cache
    description: Enables Terragrunt's provider caching.
    type: bool
    env:
      - TG_PROVIDER_CACHE
  - name: provider-cache-dir
    description: The path to the Terragrunt provider cache directory. By default, 'terragrunt/providers' folder in the user cache directory.
    type: string
    env:
      - TG_PROVIDER_CACHE_DIR
  - name: provider-cache-hostname
    description: The hostname of the Terragrunt Provider Cache server. By default, 'localhost'.
    type: string
    env:
      - TG_PROVIDER_CACHE_HOSTNAME
  - name: provider-cache-port
    description: The port of the Terragrunt Provider Cache server. By default, assigned automatically.
    type: string
    env:
      - TG_PROVIDER_CACHE_PORT
  - name: provider-cache-registry-names
    description: The list of remote registries to cached by Terragrunt Provider Cache server. By default, 'registry.terraform.io', 'registry.opentofu.org'.
    type: string
    env:
      - TG_PROVIDER_CACHE_REGISTRY_NAMES
  - name: provider-cache-token
    description: The token for authentication to the Terragrunt Provider Cache server. By default, assigned automatically.
    type: string
    env:
      - TG_PROVIDER_CACHE_TOKEN
  - name: queue-exclude-dir
    description: Unix-style glob of directories to exclude from the queue of Units to run.
    type: string
    env:
      - TG_QUEUE_EXCLUDE_DIR
  - name: queue-exclude-external
    description: Ignore external dependencies for --all commands.
    type: bool
    env:
      - TG_QUEUE_EXCLUDE_EXTERNAL
  - name: queue-excludes-file
    description: Path to a file with a list of directories that need to be excluded when running *-all commands.
    type: string
    env:
      - TG_QUEUE_EXCLUDES_FILE
  - name: queue-ignore-dag-order
    description: Ignore DAG order for --all commands.
    type: bool
    env:
      - TG_QUEUE_IGNORE_DAG_ORDER
  - name: queue-ignore-errors
    description: Continue processing Units even if a dependency fails.
    type: bool
    env:
      - TG_QUEUE_IGNORE_ERRORS
  - name: queue-include-dir
    description: Unix-style glob of directories to include from the queue of Units to run.
    type: string
    env:
      - TG_QUEUE_INCLUDE_DIR
  - name: queue-include-external
    description: Include external dependencies for --all commands without asking.
    type: bool
    env:
      - TG_QUEUE_INCLUDE_EXTERNAL
  - name: queue-include-units-reading
    description: If flag is set, 'run-all' will only run the command against Terragrunt units that read the specified file via an HCL function or include.
    type: string
    env:
      - TG_QUEUE_INCLUDE_UNITS_READING
  - name: queue-strict-include
    description: If flag is set, only modules under the directories passed in with '--include-dir' will be included.
    type: bool
    env:
      - TG_QUEUE_STRICT_INCLUDE
  - name: source
    description: Download OpenTofu/Terraform configurations from the specified source into a temporary folder, and run Terraform in that temporary folder.
    type: string
    env:
      - TG_SOURCE
  - name: source-map
    description: Replace any source URL (including the source URL of a config pulled in with dependency blocks) that has root source with dest.
    type: string
    env:
      - TG_SOURCE_MAP
  - name: source-update
    description: Delete the contents of the temporary folder to clear out any old, cached source code before downloading new source code into it.
    type: bool
    env:
      - TG_SOURCE_UPDATE
  - name: tf-forward-stdout
    description: If specified, the output of OpenTofu/Terraform commands will be printed as is, without being integrated into the Terragrunt log.
    type: bool
    env:
      - TG_TF_FORWARD_STDOUT
  - name: tf-path
    description: Path to the OpenTofu/Terraform binary. Default is tofu (on PATH).
    type: string
    env:
      - TG_TF_PATH
  - name: units-that-include
    description: If flag is set, 'run-all' will only run the command against Terragrunt modules that include the specified file.
    type: string
    env:
      - TG_UNITS_THAT_INCLUDE
  - name: use-partial-parse-config-cache
    description: Enables caching of includes during partial parsing operations. Will also be used for the --iam-role option if provided.
    type: bool
    env:
      - TG_USE_PARTIAL_PARSE_CONFIG_CACHE
---

## Running multiple units

Note that the `run` command is a more explicit and flexible way to run OpenTofu/Terraform commands in comparison to [OpenTofu shortcuts](/docs/reference/cli/commands/opentofu-shortcuts).

The `run` command also supports the following flags that can be used to drive runs in multiple units:

- `--all`: Run the provided OpenTofu/Terraform command against all units in the current stack.
- `--graph`: Run the provided OpenTofu/Terraform command against the graph of dependencies for the unit in the current working directory.

## Separating Arguments

You may, at times, need to explicitly separate the arguments used for Terragrunt from those used for OpenTofu/Terraform. In those circumstances, you can use the argument `--` to separate the Terragrunt flags from the OpenTofu/Terraform flags.

```bash
terragrunt run -- plan -no-color
```
